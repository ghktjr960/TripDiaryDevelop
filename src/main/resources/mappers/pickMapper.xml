<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pickMapper">
 	
 	<!-- 찜하기 눌렀을 때 테이블에 존재하는지 확인하는 쿼리 -->
 	<select id="pickCheck" resultType="pickVo">
 		select * from pick where pick_num = #{pickNum} and member_num = #{memberNum}
 	</select>
 	
 	<!-- 찜하기 눌렀을 때 테이블에 존재하지 않을 경우 insert -->
 	<insert id="pickInsert">
 		insert into pick values (pick_seq.nextval, #{memberNum}, #{boardNum}, sysdate)
 	</insert>
 	
 	<!-- 찜하기 눌렀을 때 테이블에 존재할 경우 delete -->
 	<delete id="pickDelete">
 		delete from pick where pick_num = #{pickNum} and member_num = #{memberNum} and board_num = #{boardNum}
 	</delete>
 	
 	<!-- pick눌렀을 때 member_act_cnt 업데이트-->
 	<update id="memberActCntPick">
 		update member_act_cnt set PICK_PRESS_CNT =
 		<choose>
 			<when test='updateType.equals("insert")'>
		 		 PICK_PRESS_CNT+1 where member_num = #{memberNum}
 			</when>
 			<when test='updateType.equals("delete")'>
		 		 PICK_PRESS_CNT-1 where member_num = #{memberNum}
 			</when>
 		</choose>
 	</update>
 	
</mapper>